---
---

<style>
    .sidebar {
      width: 250px;
      background-color: var(--color-background);
      padding: 1rem;
      position: fixed;
      height: 100%;
      overflow: auto;
      left: -250px; /* Initially hidden */
      transition: left 0.3s ease;
      z-index: 1; /* Ensure sidebar is above other content */
    }
  
    .sidebar.open {
      left: 0; /* Show sidebar */
    }
  
    .sidebar a {
      display: block;
      color: var(--color-text);
      padding: 0.5rem 0;
      text-decoration: none;
    }
  
    .sidebar a:hover {
      background-color: var(--color-muted);
    }
  
    .toggle-btn {
      position: absolute;
      top: 10px;
      left: 250px; /* Position it to the right of the sidebar */
      width: 40px; /* Width of the button */
      height: 40px; /* Height of the button */
      background-color: var(--color-primary);
      color: white;
      border: none;
      padding: 0.5rem;
      cursor: pointer;
      border-radius: 0 5px 5px 0; /* Rounded corners on the left side */
      transition: left 0.3s ease;
      z-index: 2; /* Ensure button is above the sidebar */
    }
  
    .sidebar.open + .toggle-btn {
      left: 250px; /* Adjust based on sidebar width */
    }
  </style>
  
  <div>
    <div class="sidebar">
      <button class="toggle-btn">Open</button>
      <h2>Navigation</h2>
      <a href="/">Home</a>
      <a href="/about">About</a>
      <a href="/blog">Blog</a>
      <a href="/contact">Contact</a>
    </div>
  </div>
  
  <script>
    function toggleSidebar() {
      const sidebar = document.querySelector('.sidebar');
      const toggleBtn = document.querySelector('.toggle-btn');
      sidebar.classList.toggle('open');
      if (sidebar.classList.contains('open')) {
        toggleBtn.textContent = 'Close';
        localStorage.setItem('sidebarState', 'open');
      } else {
        toggleBtn.textContent = 'Open';
        localStorage.setItem('sidebarState', 'closed');
      }
    }
  
    function attachToggleEvent() {
      const toggleBtn = document.querySelector('.toggle-btn');
      toggleBtn.addEventListener('click', toggleSidebar);
    }
  
    function restoreSidebarState() {
      const sidebarState = localStorage.getItem('sidebarState');
      const sidebar = document.querySelector('.sidebar');
      const toggleBtn = document.querySelector('.toggle-btn');
      if (sidebarState === 'open' || sidebarState === 'closed') {
        if (sidebarState === 'open') {
          sidebar.classList.add('open');
          toggleBtn.textContent = 'Close';
        } else {
          sidebar.classList.remove('open');
          toggleBtn.textContent = 'Open';
        }
      } else {
        // Default state if the value is not valid
        sidebar.classList.remove('open');
        toggleBtn.textContent = 'Open';
        localStorage.setItem('sidebarState', 'closed');
      }
    }
  
    // Restore the sidebar state on initial load
    restoreSidebarState();
  
    // Attach the event listener on initial load
    attachToggleEvent();
  
    // Reattach the event listener after a view transition
    document.addEventListener('astro:after-swap', () => {
      restoreSidebarState();
      attachToggleEvent();
    });
  </script>